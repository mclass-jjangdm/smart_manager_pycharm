{% extends "base.html" %}

{% block content %}
<div style="max-width: 800px; margin: 0 auto;">
    <div style="border-bottom: 2px solid #673ab7; margin-bottom: 20px; padding-bottom: 10px;">
        <h2>📂 도서 일괄 등록</h2>
        <p style="color: #666;">엑셀(.xlsx) 또는 CSV 파일을 업로드하여 여러 도서를 한 번에 등록합니다.</p>
    </div>

    <div style="background-color: #e3f2fd; padding: 20px; border-radius: 8px; border: 1px solid #bbdefb; margin-bottom: 30px;">
        <h4 style="margin-top: 0; color: #1565c0;">⚠️ 엑셀 파일 작성 규칙</h4>
        <ul style="margin-bottom: 0; line-height: 1.8;">
            <li>첫 번째 줄(헤더)에 다음 컬럼명이 <strong>정확히</strong> 포함되어야 합니다:</li>
            <li style="background: #fff; padding: 10px; border-radius: 4px; margin: 10px 0; font-family: monospace; color: #d32f2f;">
                ISBN, 교재명, 저자, 출판사, 정상가격, 입고가격, 판매가격, 재고
            </li>
            <li>이미 등록된 <strong>ISBN(바코드)</strong>이 있는 경우, 해당 도서는 <strong>자동으로 건너뜁니다(Skip)</strong>.</li>
            <li>가격 및 재고 칸에 숫자가 아닌 문자가 있으면 0으로 처리됩니다.</li>
        </ul>
    </div>

{#    {% if messages %}#}
{#        <ul class="messages" style="list-style: none; padding: 0; margin-bottom: 20px;">#}
{#            {% for message in messages %}#}
{#            <li style="color: #c62828; background-color: #ffebee; padding: 10px; border-radius: 4px; border: 1px solid #ffcdd2;">#}
{#                {{ message }}#}
{#            </li>#}
{#            {% endfor %}#}
{#        </ul>#}
{#    {% endif %}#}

    <div class="info-card" style="padding: 30px;">
        <form method="POST" enctype="multipart/form-data">
            {% csrf_token %}
            <div style="margin-bottom: 20px;">
                <label for="file_input" style="font-weight: bold; display: block; margin-bottom: 10px;">파일 선택:</label>
                <input type="file" name="upload_file" id="file_input" accept=".csv, .xlsx, .xls" required 
                       style="padding: 10px; border: 1px solid #ccc; border-radius: 4px; width: 100%;">
            </div>
            
            <div style="text-align: center; margin-top: 30px;">
                <button type="submit" class="btn" style="background-color: #2e7d32; padding: 12px 40px; font-size: 1.1rem;">
                    일괄 등록 시작
                </button>
                <a href="{% url 'book_list' %}" class="btn" style="background-color: #757575; margin-left: 10px;">취소</a>
            </div>
        </form>
    </div>
</div>
{% endblock %}