{% extends "base.html" %}
{% load humanize %}

{% block container_class %}wide-screen{% endblock %}

{% block content %}
<div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px;">
    <h2>ğŸ‘¨â€ğŸ« ìˆ˜ì—…(ê°•ì¢Œ) ê´€ë¦¬</h2>
    <a href="{% url 'class_create' %}" class="btn" style="background-color: #ff9800;">
        + ì‹ ê·œ ìˆ˜ì—… ê°œì„¤
    </a>
</div>

<table>
    <thead>
        <tr>
            <th style="width: 5%;">ìƒíƒœ</th>
            <th style="width: 20%;">ìˆ˜ì—…ëª…</th>
            <th style="width: 15%;">ë‹´ë‹¹ êµì‚¬</th>
            <th style="width: 15%;">ìˆ˜ì—… ì‹œê°„</th>
            <th style="width: 10%; text-align: right;">ìˆ˜ê°•ë£Œ</th>
            <th style="width: 10%; text-align: center;">ìˆ˜ê°•ìƒ</th>
            <th style="width: 15%; text-align: center;">ê¸°ê°„</th>
            <th style="width: 10%; text-align: center;">ê´€ë¦¬</th>
        </tr>
    </thead>
    <tbody>
        {% for class in classes %}
        <tr style="{% if not class.is_active %}background-color: #f5f5f5; color: #999;{% endif %}">
            <td style="text-align: center;">
                {% if class.is_active %}
                    <span style="color: #2e7d32; font-weight: bold; font-size: 0.8rem; border: 1px solid #a5d6a7; padding: 2px 6px; border-radius: 4px; background-color: #e8f5e9;">ì§„í–‰ì¤‘</span>
                {% else %}
                    <span style="color: #757575; font-size: 0.8rem; border: 1px solid #ccc; padding: 2px 6px; border-radius: 4px;">ì¢…ê°•</span>
                {% endif %}
            </td>
            <td style="font-weight: bold;">{{ class.name }}</td>
            <td>
                {% if class.teacher %}
                    {{ class.teacher.name }}
                {% else %}
                    <span style="color: #ccc;">(ë¯¸ì •)</span>
                {% endif %}
            </td>
            <td>{{ class.get_formatted_schedule }}</td>
            <td style="text-align: right; font-weight: bold;">{{ class.tuition_fee|intcomma }}ì›</td>
            <td style="text-align: center;">
                <span style="background-color: #e3f2fd; color: #1565c0; padding: 2px 8px; border-radius: 10px; font-size: 0.9rem; font-weight: bold;">
                    {{ class.students.count }}ëª…
                </span>
            </td>
            <td style="text-align: center; font-size: 0.85rem;">
                {% if class.start_date %}
                    {{ class.start_date|date:"y.m.d" }} ~ {{ class.end_date|date:"y.m.d" }}
                {% else %}
                    -
                {% endif %}
            </td>
            <td style="text-align: center; white-space: nowrap;">
                <div style="display: flex; gap: 5px; justify-content: center;">
                    <a href="{% url 'class_update' class.pk %}" class="btn" style="padding: 5px 10px; font-size: 0.8rem; background-color: #757575;">ìˆ˜ì •</a>
                    <form action="{% url 'class_delete' class.pk %}" method="POST" style="margin: 0;">
                        {% csrf_token %}
                        <button type="submit" class="btn" onclick="return confirm('ì •ë§ ì´ ìˆ˜ì—…ì„ ì‚­ì œí•˜ì‹œê² ìŠµë‹ˆê¹Œ?');"
                                style="padding: 5px 10px; font-size: 0.8rem; background-color: #e53935;">
                            ì‚­ì œ
                        </button>
                    </form>
                </div>
            </td>
        </tr>
        {% empty %}
        <tr>
            <td colspan="8" style="text-align: center; padding: 40px; color: #999;">
                ê°œì„¤ëœ ìˆ˜ì—…ì´ ì—†ìŠµë‹ˆë‹¤. ì‹ ê·œ ìˆ˜ì—…ì„ ë“±ë¡í•´ ì£¼ì„¸ìš”.
            </td>
        </tr>
        {% endfor %}
    </tbody>
</table>
{% endblock %}