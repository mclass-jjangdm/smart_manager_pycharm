{% extends "base.html" %}
{% load humanize %}

{% block container_class %}wide-screen{% endblock %}

{% block content %}
<style>
    /* í‡´ì‚¬ì í–‰ ìŠ¤íƒ€ì¼ (íšŒìƒ‰ ì²˜ë¦¬ ë° íˆ¬ëª…ë„ ì¡°ì ˆ) */
    tr.retired {
        background-color: #f5f5f5 !important;
        color: #999 !important;
    }
    tr.retired a {
        color: #999 !important; /* ë§í¬ ìƒ‰ìƒë„ íë¦¬ê²Œ */
        text-decoration: line-through; /* ì´ë¦„ì— ì·¨ì†Œì„  */
    }
    tr.retired td {
        border-bottom: 1px solid #e0e0e0;
    }

    /* í† ê¸€ ìŠ¤ìœ„ì¹˜ ìŠ¤íƒ€ì¼ (ì„ íƒì‚¬í•­: ì˜ˆìœ ì²´í¬ë°•ìŠ¤) */
    .toggle-label {
        font-size: 0.9rem;
        cursor: pointer;
        display: flex;
        align-items: center;
        gap: 5px;
        user-select: none;
    }
</style>

<div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px;">
    <h2>ğŸ‘¨â€ğŸ« êµì‚¬ ê´€ë¦¬</h2>

    <div style="display: flex; gap: 15px; align-items: center;">
        <form method="GET" id="filterForm" style="margin: 0;">
            <label class="toggle-label">
                <input type="checkbox" name="show_retired"
                       {% if show_retired %}checked{% endif %}
                       onchange="document.getElementById('filterForm').submit()">
                í‡´ì‚¬ì í¬í•¨í•˜ì—¬ ë³´ê¸°
            </label>
        </form>

        <div style="width: 1px; height: 20px; background: #ddd; margin: 0 5px;"></div>

        <a href="{% url 'teacher_payroll' %}" class="btn" style="background-color: #1a237e;">
            ğŸ’° ê¸‰ì—¬ ê³„ì‚°
        </a>
        <a href="{% url 'teacher_bulk_work' %}" class="btn" style="background-color: #673ab7;">
            âš¡ ê·¼ë¬´ ê¸°ë¡ ì¼ê´„ ì…ë ¥
        </a>
        <a href="{% url 'teacher_create' %}" class="btn">ì‹ ê·œ êµì‚¬ ë“±ë¡</a>
    </div>
</div>

<table>
    <thead>
        <tr>
            <th>ì´ë¦„</th>
            <th>ì„±ë³„</th>
            <th>ì „í™”ë²ˆí˜¸</th>
            <th>ì´ë©”ì¼</th>
            <th>ì…ì‚¬ì¼</th>
            <th>í‡´ì‚¬ì¼</th> <th>ê¸‰ì—¬ ê¸°ì¤€</th>
            <th>ì¶”ê°€ ê¸‰ì—¬</th>
            <th>ì€í–‰/ê³„ì¢Œ</th>
            <th>ê´€ë¦¬</th>
        </tr>
    </thead>
    <tbody>
        {% for teacher in teachers %}
        <tr class="{% if teacher.resign_date %}retired{% endif %}">
            <td>
                <a href="{% url 'teacher_detail' teacher.pk %}" style="font-weight: bold; font-size: 1.1rem;">
                    {{ teacher.name }}
                </a>
            </td>
            <td>{{ teacher.get_gender_display }}</td>
            <td>{{ teacher.phone }}</td>
            <td>{{ teacher.email|default:"-" }}</td>
            <td>{{ teacher.hire_date|date:"Y-m-d" }}</td>

            <td style="color: #e53935;">{{ teacher.resign_date|date:"Y-m-d"|default:"-" }}</td>

            <td style="text-align: right;">{{ teacher.base_pay|default:"0"|intcomma }}ì›</td>
            <td style="text-align: right;">{{ teacher.extra_pay|default:"0"|intcomma }}ì›</td>
            <td>{{ teacher.bank_name }} / {{ teacher.account_number }}</td>
            <td>
                <a href="{% url 'teacher_update' teacher.pk %}" class="btn" style="padding: 5px 10px; font-size: 0.8rem; background-color: #ff9800;">ìˆ˜ì •</a>
            </td>
        </tr>
        {% empty %}
        <tr>
            <td colspan="10" style="text-align: center; padding: 30px;">ë“±ë¡ëœ êµì‚¬ê°€ ì—†ìŠµë‹ˆë‹¤.</td>
        </tr>
        {% endfor %}
    </tbody>
</table>
{% endblock %}